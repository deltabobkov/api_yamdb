# api_yamdb
api_yamdb

## Модель User
Создана на основе AbstractBaseUser.
Пароль больше не является обязательным полем
Так же добавлены кастомные формы для создания и изменения пользователя через адмнику

Поля:
- username
- email
- first_name
- last_name
- is_admin
- bio
- role - Может быть:
    - admin
    - user
    - moderator
- confirm_code

# Добавлена возможность проверки прав для пользователей
(users.permissions.py)

Есть проверки:
- IsAdmin
- IsModerator
- IsUser

Предлагаю использовать их для разграничения прав. Сейчас проверятеся просто наличие нужной роли, можно изменить роли и добавить в них проверку на конкретные дейсвтия или сделать проверку на конкретные обьекты

Привер использования:
```python
# Импорт разрешений
from users.permissions import IsAdmin, IsModerator, IsUser
...

# Права только для администратора
class UserViewSet(viewsets.ModelViewSet):
    ...
    permission_classes = [IsAdmin]
    ...

# Права для Администратора или пользователя
class UserViewSet(viewsets.ModelViewSet):
    ...
    permission_classes = [IsAdmin|IsUser]
    ...

```

# Проблемы:

В пользоателе не смог реализовать проверку нужного regex в имени пользователя, не смог решить проблему с '\z'. Заменил regex на '^(?!^me$)[\w.@+-]+$'. Он работает и тесты проходит

### Тесты
Большую часть тестов прохожу, но есть проблемы с нескоькими тестами:
- test_00_admin_create_user_length_and_simbols_validation - Проблема с возвращением нуного когда. Сама по себе ситуация обрабатывается корректно. Но в ТЗ просят возвращаять определенный код, а не который возвращает валидатор сериализатора, как его переназначить я незнаю(

- test_00_valid_data_admin_create_user - не понимаю в чем проблема, при выполнении действий в ручную все работает, отловить проблему не выходит

- test_get_confirmation_code_for_user_created_by_admin - скорее всего проблема как и в предыдущем тесте